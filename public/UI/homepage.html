<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Home Page</title>
<link rel="stylesheet" href="../css/standardLayout.css">
<link rel="stylesheet" href="../css/HomePage/homepage.css">

</head>

<body>
  <div class="navbar">
    <div class="logo">
      <img src="../images/fruiti.png" alt="Placeholder for logo" />
    </div>

    <div class="search-bar">
      <input type="text" placeholder="Search Fruit" />
    </div>


    <div class="auth-buttons">
      <button onclick="location.href='/login'" class="login-btn">Log In</button>
      <button onclick="location.href='/signup'" class="signup-btn">Sign Up</button>
    </div>


  </div>

    <nav class="nav-links">
      <a href="/">Home</a>
      <a href="become-seller.html">Become a Seller</a>
      <a href="nutrition.html">Nutrition</a>
      <a href="recipe.html">Recipes</a>
      <a href="about-us.html">About Us</a>
    </nav>

  <div class="black-bar"></div>


  <div class="homepage-images">
    <div class="card-container">
      <div class="fruit-card">
        <a href="https://www.medicalnewstoday.com/articles/271232#nutrition" target="_blank"> 
        <img src="../images/placeholder/fruitproj1jpg.jpg" alt="add image">
      </a>
      </div>
         <p>Why these fruits benefit you!</p>
    </div>

    <div class="card-container">
      <div class="fruit-card">
        <a href="https://www.whataboutwatermelon.com/index.php/2017/10/32-fun-facts-watermelon/" target="_blank">
        <img src="../images/placeholder/fruitproj2.jpg" alt="add image">
      </a>
      </div>
         <p>Watermelon Benefits!</p>
    </div>

    <div class="card-container">
      <div class="fruit-card">
        <a href="https://www.healthline.com/nutrition/benefits-of-grapes" target="_blank">
        <img src="../images/placeholder/fruitproj3jpg.jpg" alt="add image">
      </a>
      </div>
          <p>Grapes and you</p>
    </div>
  </div>

  <div class="homepage-images">
    <div class="card-container">
      <div class="fruit-card">
        <a href="https://factschology.com/factschology-articles-podcast/facts-pineapples-eat-you" target="_blank">
        <img src="../images/placeholder/fruitproj4.jpg" alt="add image">
        </a>
      </div>
         <p>Pineapple is eating you!</p>
    </div>

    <div class="card-container">
      <div class="fruit-card">
        <a href="https://health.clevelandclinic.org/benefits-of-strawberries" target="_blank">
        <img src="../images/placeholder/fruitproj5.jpg" alt="add image">
      </a>
      </div>
         <p>I fucking love strawberries</p>
    </div>


</div>
<script>
document.addEventListener("DOMContentLoaded", async () => {
  const sections = document.querySelectorAll(".homepage-images");
  if (sections.length < 2) return;

  try {
    const res = await fetch("/api/articles");
    const result = await res.json();

    if (!result.data || !Array.isArray(result.data)) {
      console.error("Invalid data format from /api/articles");
      return;
    }

    // Randomize all articles
    const shuffled = result.data.sort(() => Math.random() - 0.5);

    // Pick only 5 random ones
    const selected = shuffled.slice(0, 5);

    // Split 3 top, 2 bottom
    const topRow = selected.slice(0, 3);
    const bottomRow = selected.slice(3, 5);

    const makeCard = (article) => `
      <div class="card-container">
        <div class="fruit-card">
          <a href="${article.hyperlink}" target="_blank" rel="noopener noreferrer">
            <img src="${article.thumbnail}" alt="${article.title}">
          </a>
        </div>
        <p>${article.title}</p>
      </div>
    `;

    // Clear out the dynamic section (optional, so you can mix static + dynamic)
    // sections[0].innerHTML = "";
    // sections[1].innerHTML = "";

    // Append randomized cards
    sections[0].insertAdjacentHTML("beforeend", topRow.map(makeCard).join(""));
    sections[1].insertAdjacentHTML("beforeend", bottomRow.map(makeCard).join(""));

  } catch (err) {
    console.error("Error fetching articles:", err);
  }
});
</script>

</body>

</html>
